<!doctype html>
<html>
<head>
    <title>Imageboard</title>
    <link href="https://fonts.googleapis.com/css?family=Dawning+of+a+New+Day|Oswald:400,700" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
</head>
    <body>
        <div id="main">
            <div class="conteudo">
                <div class="margem">
                    <div class="last-margin">
                        <!-- <img class="folha" src="/folha.png"> -->
                        <div class="paper">
                                <div class="text-title">My Image Board</div>
                                <img id="pino-amarelo" class="pinos" src="/pino.png">
                                <img id="pino-vermelho" class="pinos" src="/pino2.png">
                        </div>

                        <div v-if="images.length>0">
                            <div class="images-section">
                                <div v-for="image in images">
                                    <div class="card" @click="imageModal(image.id)">
                                        <img class="pino" src="/pino3.png">
                                        <img class="card-image" :src="image.url" :key="image.id" :alt="image.title">
                                        <div class="card-title"> {{ image.title }} </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="inputs-buttons">
                            <div class="tickets">
                                <img class="ticket" src="/ticket.png">
                                <img id="pino-amarelo-bottom" class="pinos" src="/pino.png">
                            </div>
                            <div class="upload-section">
                                <div class="error-message"> {{ error }} </div>
                                <div class="upload-tag">
                                    <label id="upload-label" class="upload" for="file-field"></i>Select an image</label>
                                    <div id="upload-name"  class="input-title upload"></div>
                                    <input type="file" id="file-field" @change="imageSelected">
                                </div>
                                <div class="upload-input2">
                                    <input id="upload-input" name="displayImage" :value="selectedImage" disabled>
                                </div>
                                <div class="title-tag">
                                    <div id="title-name" class="input-title upload">Title :</div>
                                    <input id="title-input" type="text"  v-model="title" required>
                                </div>
                                <div class="description-tag">
                                    <div id="description-name" class="input-title upload">Description :</div>
                                    <input id="description-input"   type="text" v-model="description" placeholder="" required>
                                </div>
                                <div class="username-tag">
                                    <div id="username-name" class="input-title upload">Username :</div>
                                    <input id="username-input" type="text" v-model="username" placeholder="" required>
                                </div>
                                <button id="submit" class="button upload" @click="upload()">Upload</button>
                            </div>
                        </div>

                        <div v-if="imageModalOpen">
                            <image-modal v-bind:id="imageIdForModal" v-on:closemodal="closemodal"></image-modal>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script id="image-modal" type="text/x-template">
            <div id="image-modal" @click="closemodal">
                <div id="image-modal-inlet">
                    <img class="image-modal-img" :src="imageDetails.url">
                    <div class="image-modal-title">{{imageDetails.title}}</div>
                    <div class="image-modal-description">{{imageDetails.description}}</div>
                    <div class="image-modal-created">Uploaded by {{imageDetails.username}} on {{imageDetails.created_at}}</div>
                    <h1>Add a Comment!</h1>
                    <form v-on:submit.prevent="onSubmit">
                        <label for="comment">Comment</label>
                        <input v-model="newComment" name="comment" id="comment">
                        <label for="username">Username</label>
                        <input v-model="newUserName" name="username" id="username">
                        <input type="Submit" value="Submit">
                    </form>
                    <div v-for="comment in comments">
                        <div class="image-modal-comment">
                            <div class="comment-text">{{comment.comment}}</div>
                            <div class="comment-author">{{comment.username}} on {{comment.created_at}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </script>
        <script src="/js/vue.js"></script>
        <script src="/js/axios.min.js"></script>
        <script src="/js/script.js"></script>
    </body>
</html>
